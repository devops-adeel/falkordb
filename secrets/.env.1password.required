# FalkorDB Secrets Manifest
# Documents all expected secrets in 1Password HomeLab vault
# This file is used by setup-vault.sh to verify/create structure

vault: HomeLab

secrets:
  # Core Authentication Secrets
  core:
    - name: redis-password
      title: FalkorDB/Core
      field: redis-password
      description: Redis AUTH password for FalkorDB (future use)
      type: password
      required: false  # Not currently enforced by FalkorDB
      generate: true   # Auto-generate secure password
      length: 32
      
    - name: nextauth-secret
      title: FalkorDB/Core
      field: nextauth-secret
      description: NextAuth.js secret for session encryption  
      type: secret
      required: true   # Required for browser UI security
      generate: true   # Auto-generate secure token
      length: 32
      
  # Integration API Keys
  integration:
    - name: graphiti-api-key
      title: FalkorDB/Integration
      field: graphiti-api-key
      description: API key for Graphiti knowledge graph integration
      type: api-key
      required: false  # Only if using Graphiti
      generate: false  # User must provide
      placeholder: "Add your Graphiti API key here"
      
    - name: openai-api-key
      title: FalkorDB/Integration
      field: openai-api-key
      description: OpenAI API key for LLM features
      type: api-key
      required: false  # Only if using AI features
      generate: false  # User must provide from OpenAI
      placeholder: "sk-..."
      
  # Future OAuth Providers
  oauth:
    - name: github-client-secret
      title: FalkorDB/OAuth
      field: github-client-secret
      description: GitHub OAuth client secret for SSO
      type: oauth-secret
      required: false  # Future feature
      generate: false  # From GitHub OAuth app
      placeholder: "GitHub OAuth app client secret"
      
    - name: google-client-secret
      title: FalkorDB/OAuth
      field: google-client-secret
      description: Google OAuth client secret for SSO
      type: oauth-secret
      required: false  # Future feature
      generate: false  # From Google Cloud Console
      placeholder: "Google OAuth app client secret"

# Generation rules for auto-generated secrets
generation:
  password:
    method: "openssl rand -base64"
    charset: "alphanumeric"
    
  secret:
    method: "openssl rand -hex"
    charset: "hex"
    
  api-key:
    method: "uuidgen"
    format: "lowercase-no-dashes"

# Validation rules
validation:
  - All required secrets must exist before deployment
  - Generated secrets should be at least 32 characters
  - API keys should follow provider-specific formats
  - OAuth secrets must match registered app configuration